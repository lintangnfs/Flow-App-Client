<mat-progress-bar *ngIf="value > 0" [value]='value' color='primary'></mat-progress-bar>
<div class="page-header">
    <h1>Algoritma Alpha Miner</h1>
</div>

<div class="page-content">
    <mat-horizontal-stepper labelPosition='bottom'>
        <mat-step>
            <ng-template matStepLabel>Task</ng-template>
            <mat-card>
                <mat-card-header>
                    <mat-card-title>1. Task</mat-card-title>
                    <mat-card-subtitle>First step of Alpha Miner Algorithm </mat-card-subtitle>
                </mat-card-header>
                <mat-card-content >
                    <mat-accordion>
                        <mat-expansion-panel expanded>
                            <mat-expansion-panel-header>
                                <mat-panel-title (click)="raw()">
                                    Data 
                                </mat-panel-title>
                                <mat-panel-description>
                                    Data that used for Alpha Miner Algorithm
                                </mat-panel-description>
                            </mat-expansion-panel-header>
                            <div [ngStyle]="{'display': display}">
                                <div class="mat-elevation-z8" >
                                    <table mat-table matSort [dataSource]="eventLog">
                                        <ng-container [matColumnDef]="column" *ngFor="let column of displayedColumns">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> {{ column }} </th>
                                            <td mat-cell *matCellDef="let element"> {{ element[column] }} </td>
                                        </ng-container>
                                        <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
                                        <tr mat-row *matRowDef="let row; columns: columnsToDisplay"></tr>
                                    </table>
                                    <mat-paginator [pageSizeOptions]="[10, 25, 50, 100]" showFirstLastButtons></mat-paginator>
                                </div>
                            </div>
                        </mat-expansion-panel>
                        <mat-expansion-panel>
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    Activities
                                </mat-panel-title>
                                <mat-panel-description>
                                    All activities in event log
                                </mat-panel-description>
                            </mat-expansion-panel-header>
                            <p>{{ transition }}</p>
                        </mat-expansion-panel>
                    </mat-accordion>
                </mat-card-content>
            </mat-card>
        </mat-step>
        <mat-step>
            <ng-template matStepLabel>Start Activities</ng-template>
            <mat-card>
                <mat-card-header>
                    <mat-card-title>2. Start Activities</mat-card-title>
                    <mat-card-subtitle>All start activities in event log</mat-card-subtitle>
                </mat-card-header>
                <mat-card-content>
                    <p>{{ initialTransition }}</p>
                </mat-card-content>  
            </mat-card>
        </mat-step>
        <mat-step>
            <ng-template matStepLabel>End Activities</ng-template>
            <mat-card>
                <mat-card-header>
                    <mat-card-title>3. End Activities</mat-card-title>
                    <mat-card-subtitle>All end activities in event log</mat-card-subtitle>
                </mat-card-header>
                <mat-card-content>
                        <p>{{ finalTransition }}</p>
                </mat-card-content>
            </mat-card>
        </mat-step>
        <mat-step>
            <ng-template matStepLabel>Relation</ng-template>
            <mat-card>
                <mat-card-header>
                    <mat-card-title>4. Relation</mat-card-title>
                    <mat-card-subtitle>Relation in Event log</mat-card-subtitle>
                </mat-card-header>
                <mat-card-content >
                    <div [ngStyle]="{'display': display}" >
                        <div class="mat-elevation-z8" style="overflow: auto">
                            <table mat-table matSort [dataSource]="relationData">
                                <ng-container [matColumnDef]="column" *ngFor="let column of displayedColumnsRelation">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header> {{ column }} </th>
                                    <td mat-cell *matCellDef="let element"> {{ element[column] }} </td>
                                </ng-container>
                                <tr mat-header-row *matHeaderRowDef="columnsToDisplayRelation"></tr>
                                <tr mat-row *matRowDef="let row; columns: columnsToDisplayRelation"></tr>
                            </table>
                        </div>
                        <mat-paginator [pageSizeOptions]="[10, 25, 50, 100]" showFirstLastButtons ></mat-paginator>
                    </div>
                </mat-card-content>
            </mat-card>
        </mat-step>
        <mat-step>
            <ng-template matStepLabel>Pairs</ng-template>
            <mat-card>
                <mat-card-header>
                    <mat-card-title>5. Pairs</mat-card-title>
                    <mat-card-subtitle>All pairs based on relation between activities</mat-card-subtitle>
                </mat-card-header>
                <mat-card-content >
                    <p *ngFor="let value of final_pairs">{{ value }}</p>
                    <!-- <p>{{split_pairs}}</p> -->
                </mat-card-content>
            </mat-card>
        </mat-step>
        <mat-step>
            <ng-template matStepLabel>Maximal Pairs</ng-template>
            <mat-card>
                <mat-card-header>
                    <mat-card-title>6. Maximal Pairs</mat-card-title>
                    <mat-card-subtitle>Chosse 3 column that will be used as case id, event and timestamp</mat-card-subtitle>
                </mat-card-header>
                <mat-card-content >
                        <p *ngFor="let value of maximalPairs">{{ value }}</p>
                </mat-card-content>
            </mat-card>
        </mat-step>
        <mat-step>
          <ng-template matStepLabel>Add Places</ng-template>
          <mat-card>
              <mat-card-header>
                  <mat-card-title>Choose Column</mat-card-title>
                  <mat-card-subtitle>Chosse 3 column that will be used as case id, event and timestamp</mat-card-subtitle>
              </mat-card-header>
              <mat-card-content >
                <p *ngFor="let value of places">{{ value }}</p>
              </mat-card-content>
          </mat-card>
      </mat-step>
      <mat-step>
        <ng-template matStepLabel>Petri Net</ng-template>
        <mat-card>
            <mat-card-header>
                <mat-card-title>8. Petri Net</mat-card-title>
                <mat-card-subtitle>Chosse 3 column that will be used as case id, event and timestamp</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                    <img [src]="image">
            </mat-card-content>
        </mat-card>
    </mat-step>
    </mat-horizontal-stepper>
</div>


